<!doctype html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/turma_dashboard.css">
    <link rel="icon" type="image/png" href="img/NotaDez_Logo.png">
    <title id="page_title">Dashboard da Turma | NotaDez</title>
</head>

<body>
    <header>
        <div class="brand">
            <img class="icon_person" src="img/NotaDez_Logo.png" alt="Logo do site">
            <div>
                <h1 style="color: #0a3db7; font-family: 'Montserrat', sans-serif;">Nota<span
                        style="color: #ffc30f;">Dez</span></h1>
                <div class="small" id="nav_current">Turma: <span id="nome_disciplina">{disciplina}</span> - Turma
                    {turma}<span id=""></span></div>
            </div>
        </div>

        <div style="display:flex;gap:16px;align-items:center">
            <div class="inline-grid">
                <div style="text-align:right">
                    <div class="small muted">Olá, Professor(a)</div>
                    <div style="display:flex;gap:8px;align-items:center">
                        <img class="avatar" src="img/avatar.jpg" alt="Icone de perfil">
                        <a href="#" class="link">Sair</a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="container">

        <main>
            <section class="divider toolbar">
                <div class="action-buttons" style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button id="add_component_btn" class="btn primary">+ Componente de Nota</button>
                    <button id="manage_formula_btn" class="btn secondary">Gerenciar Fórmula</button>
                    <button id="manage_students_btn" class="btn secondary">Gerenciar Alunos</button>
                    <button id="export_grades_btn" class="btn download">↓ Exportar Notas (CSV)</button>
                </div>
            </section>

            <section class="divider grade-table-container">
                <h2 id="table_title" style="margin-top:0; color: #0a3db7;">Lançamento e Consulta de Notas</h2>

                <div class="responsive-table">
                    <table id="grade_table">
                        <thead>
                            <tr>
                                <th>Matrícula</th>
                                <th>Nome do Aluno</th>

                                <!-- A ideia é as siglas (ex P1) aparecer em th vazio
                                 isso vai ser feito no .ts -->
                                <th class="final-grade-col">Nota Final</th>
                            </tr>

                        </thead>
                        <tr>

                        </tr>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <div id="modal_container" class="modal-overlay" style="display: none;">

                <!-- Gerenciar Alunos da Turma -->
                <div id="modal_alunos" class="modal-content">
                    <div class="modal-header">
                        <h2>Gerenciar Alunos da Turma</h2>
                        <button class="btn" style="background: none; color: var(--muted)">X</button>
                    </div>
                    <div class="modal-body">

                        <div class="tab-buttons">
                            <button type="button" class="btn active" data-tab="tab-manual-aluno">Adicionar
                                Manualmente</button>
                            <button type="button" class="btn" data-tab="tab-import-aluno">Importar CSV</button>
                            <button type="button" class="btn" data-tab="tab-edit-aluno">Editar Aluno</button>
                            <button type="button" class="btn" data-tab="tab-delete-aluno">Excluir Aluno</button>
                        </div>

                        <div id="tab-manual-aluno" class="tab-panel" style="display: block;">
                            <form id="form-aluno-manual">
                                <div class="form-group">
                                    <label for="aluno-matricula">Matrícula</label>
                                    <input type="text" id="aluno-matricula" placeholder="Ex: 111111" required>
                                </div>
                                <div class="form-group">
                                    <label for="aluno-nome">Nome Completo</label>
                                    <input type="text" id="aluno-nome" placeholder="Ex: Maria da Silva" required>
                                </div>
                                <button type="submit" class="btn">Adicionar</button>
                            </form>
                        </div>

                        <div id="tab-import-aluno" class="tab-panel" style="display: none;">
                            <p class="small">Importe um arquivo CSV contendo apenas as colunas: 'matricula', 'nome'.</p>
                            <form id="form-aluno-import">
                                <div class="form-group">
                                    <label for="csv-file">Arquivo CSV</label>
                                    <input type="file" id="csv-file" accept=".csv" required>
                                </div>
                                <button type="submit" class="btn">Adicionar</button>
                            </form>
                            <p id="import-status" class="status-message small" style="color: var(--muted)">Aguardando
                                arquivo.</p>
                        </div>

                        <div id="tab-edit-aluno" class="tab-panel" style="display: none;">
                            <p class="small">Digite a Matrícula do aluno que deseja editar.</p>
                            <form id="form-aluno-edit">
                                <div class="form-group">
                                    <label for="aluno-matricula">Matrícula</label>
                                    <input type="text" id="aluno-matricula" placeholder="Ex: 111111" required>
                                    <p></p>
                                </div>
                                <p class="small">Digite o que deseja editar:</p>
                                <div class="form-group">
                                    <label for="aluno-matricula">Matrícula</label>
                                    <input type="text" id="aluno-matricula" placeholder="Ex: 111111" required>
                                </div>
                                <div class="form-group">
                                    <label for="aluno-nome">Nome Completo</label>
                                    <input type="text" id="aluno-nome" placeholder="Ex: Maria da Silva" required>
                                </div>
                            </form>
                            <button type="submit" class="btn">Editar Aluno</button>
                        </div>

                        <div id="tab-delete-aluno" class="tab-panel" style="display: none;">
                            <p class="small">Digite a Matrícula do aluno que deseja deletar.</p>
                            <form id="form-aluno-edit">
                                <div class="form-group">
                                    <label for="aluno-matricula">Matrícula</label>
                                    <input type="text" id="aluno-matricula" placeholder="Ex: 111111" required>
                                    <p></p>
                                </div>
                                <p class="small">Confirme os dados do aluno para deletar:</p>
                                <div class="form-group">
                                    <label for="aluno-matricula">Matrícula</label>
                                    <input type="text" id="aluno-matricula" placeholder="Ex: 111111" required>
                                </div>
                                <div class="form-group">
                                    <label for="aluno-nome">Nome Completo</label>
                                    <input type="text" id="aluno-nome" placeholder="Ex: Maria da Silva" required>
                                </div>
                            </form>
                            <button type="submit" class="btn" style="background-color: #dc3545;">Deletar Aluno</button>
                        </div>

                    </div>
                </div>

                <!-- Componentes de Nota -->
                <div id="modal_componentes" class="modal-content" style="display: none;">
                    <div class="modal-header">
                        <h2>Gerenciar Componentes de Nota</h2>
                        <button class="btn" style="background: none; color: var(--muted)">X</button>
                    </div>
                    <div class="modal-body">
                        <p class="status-message">Adicione ou remova os componentes que compõem a nota.</p>

                        <div id="componentes_lista">
                            <div class="info-componentes"
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <span>P1 - Prova 1</span>
                                <button class="btn secondary"
                                    style="background: none; color: #dc3545; padding: 5px 10px; border: none;">X</button>
                            </div>
                        </div>

                        <div class="form-group"
                            style="margin-top: 20px; border-top: 1px solid #e6e9ef; padding-top: 15px;">
                            <label for="new_component_nome">Nome do Componente</label>
                            <input type="text" id="new_component_nome" placeholder="Ex: Prova 3">
                            <label for="new_component_sigla">Sigla do Componente</label>
                            <input type="text" id="new_component_sigla" placeholder="Ex: P3">
                            <label for="new_component_descricao">Descrição do Componente</label>
                            <input type="text" id="new_component_descricao" placeholder="Ex: Prova Teórica de Python">
                        </div>

                        <div style="text-align: right; margin-top: 10px;">
                            <button type="submit" class="btn" id="add_component_btn_modal">Adicionar</button>
                        </div>
                    </div>


                </div>

                <!-- Modal de Confirmação de Exclusão -->
                <div id="modal_confirmacao" class="modal-content" style="display: none; max-width: 400px;">
                    <div class="modal-header">
                        <h2>Excluir Componente</h2>
                    </div>
                    <div class="modal-body">
                        <p class="status-message" id="confirmacao_mensagem">
                            Tem certeza que deseja excluir o componente "<strong id="confirmacao_nome"></strong>"?
                        </p>
                        <p style="color: #dc3545; font-size: 14px; margin-top: 10px;">
                            Esta ação não pode ser desfeita.
                        </p>

                        <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                            <button type="submit" class="btn secondary" id="btn_cancelar_exclusao">Cancelar</button>
                            <button type="submit" class="btn" id="btn_confirmar_exclusao"
                                style="background: #dc3545;">Excluir</button>
                        </div>
                    </div>
                </div>


                <div id="modal_formula" class="modal-content" style="display: none;">
                    <div class="modal-header">
                        <h2>Gerenciar Fórmula de Média</h2>
                        <button class="btn secondary">X</button>
                    </div>
                    <div class="modal-body">
                        <p class="status-message">A alteração dos campos afetará todas as turmas dessa disciplina
                        </p>

                        <div class="form-group">
                            <label for="formula_type">Tipo de Cálculo</label>
                            <select id="formula_type">
                                <option value="selecione" disabled>Selecione...</option>
                                <option value="aritmetica">Média Aritmética</option>
                                <option value="ponderada">Média Ponderada</option>
                            </select>
                        </div>

                        <div class="form-group" id="formula_display">
                            <label>Fórmula Atual</label>
                            <input type="text" placeholder="Exemplo: (Nota1*2 + Nota2*3) / 5">
                        </div>

                        <div style="text-align: right; margin-top: 20px;">
                            <button type="submit" class="btn" id="save_formula_btn">Salvar</button>
                        </div>
                    </div>
                </div>
            </div>


    </div>
    </main>
    </div>

    <script src="../dist/script/turma_dashboard.js"></script>
</body>

</html>